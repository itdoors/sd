    {% trans_default_domain 'ListsContactBundle' %}

    <script type="text/javascript">
        $(document).ready(function()
        {
            $.fn.editable.defaults.inputclass = 'form-control';
            $.fn.editable.defaults.emptytext = '{% trans %}Enter value{% endtrans %}';

            $('.sd-contact-editable-text').editable({
                url: '{{ path('sd_common_ajax_model_contact_save') }}',
            });

            $('.sd-contact-editable-phone').each(function() {

                var self = $(this);

                self.editable({
                    url: '{{ path('sd_common_ajax_model_contact_save') }}',
                    select2: {
                        minimumInputLength: 2,
                        allowClear: true,
                        ajax: {
                            url: '{{ path('sd_common_ajax_contact_phone') }}',
                            dataType: 'json',
                            data: function (term, page) {

                                var queryData = {
                                    query: term
                                };

                                if (self.data('organization-id'))
                                {
                                    queryData.organizationId = self.data('organization-id')
                                }

                                return queryData;
                            },
                            results: function (data, page) {
                                return {
                                    results: data
                                };
                            }
                        }
                    }
                })

            });

            $('.sd-contact-birthday').on('shown', function(e, editable) {

                var input = editable.input.$input;

                input.attr('readonly', 'readonly');

                input.datepicker({
                    rtl: App.isRTL(),
                    autoclose: true,
                    format: "dd.mm.yyyy",
                    pickerPosition: (App.isRTL() ? "bottom-right" : "bottom-left"),
                    language: 'ru',
                    startView: 'decade',
                    endDate: new Date(),
                    weekStart: 1
                });
            });

        });
    </script>

    {% if organizationId %}
    {% else %}
        <div class="navigation">
            {{ knp_pagination_render(pagination) }}
        </div>
    {% endif %}

	<div class="table-scrollable">
        <table class="table table-striped table-hover table-bordered">
            <thead>
            <tr>
                <th>#</th>
                {% if organizationId %}
                {% else %}
                    <th>{% trans %}Organization{% endtrans %}</th>
                {% endif %}
                <th>{% trans %}FirstName{% endtrans %}</th>
                <th>{% trans %}LastName{% endtrans %}</th>
                <th>{% trans %}SurName{% endtrans %}</th>
                <th>{% trans %}Position{% endtrans %}</th>
                <th>{% trans %}Phone{% endtrans %}</th>
                <th>{% trans %}Mobile{% endtrans %}</th>
                <th>{% trans %}Email{% endtrans %}</th>
                <th>{% trans %}Birthday{% endtrans %}</th>
                <th>{% trans %}Contact type{% endtrans %}</th>
                <th>{% trans %}Owner{% endtrans %}</th>
                <th>{% trans %}Creator{% endtrans %}</th>
            </tr>
            </thead>
            <tbody>
            {% for item in pagination %}
            <tr >
                <td>{{ item.0.id }}</td>
                {% if organizationId %}
                {% else %}
                    <td>{{ item.organizationName }}</td>
                {% endif %}
                <td>
                    <a href="#" class="sd-contact-editable-text" data-name="firstName" data-type="text" data-pk="{{ item.0.id }}" data-value="{{ item.0.firstName }}" data-original-title="{% trans %}Edit{% endtrans %}">
                        {{ item.0.firstName }}
                    </a>
                </td>
                <td>
                    <a href="#" class="sd-contact-editable-text" data-name="lastName" data-type="text" data-pk="{{ item.0.id }}" data-value="{{ item.0.lastName }}" data-original-title="{% trans %}Edit{% endtrans %}">
                        {{ item.0.lastName }}
                    </a>
                </td>
                <td>
                    <a href="#" class="sd-contact-editable-text" data-name="middleName" data-type="text" data-pk="{{ item.0.id }}" data-value="{{ item.0.middleName }}" data-original-title="{% trans %}Edit{% endtrans %}">
                        {{ item.0.middleName }}
                    </a>
                </td>
                <td>
                    <a href="#" class="sd-contact-editable-text" data-name="position" data-type="text" data-pk="{{ item.0.id }}" data-value="{{ item.0.position }}" data-original-title="{% trans %}Edit{% endtrans %}">
                        {{ item.0.position }}
                    </a>
                </td>
                <td>
                    <a href="#" class="sd-contact-editable-phone"
                        data-name="phone1" data-type="select2"
                        data-pk="{{ item.0.id }}"
                        data-value="{{ item.0.phone1 }}"
                        data-original-title="{% trans %}Edit{% endtrans %}"
                        {% if item.organizationId %}
                            data-organization-id="{{ item.organizationId }}"
                        {% endif %}
                    >
                        {{ item.0.phone1 }}
                    </a>
                </td>
                <td>
                    <a href="#" class="sd-contact-editable-phone"
                       data-name="phone2" data-type="select2"
                       data-pk="{{ item.0.id }}"
                       data-value="{{ item.0.phone2 }}"
                       data-original-title="{% trans %}Edit{% endtrans %}"
                            {% if item.organizationId %}
                                data-organization-id="{{ item.organizationId }}"
                            {% endif %}
                    >
                        {{ item.0.phone2 }}
                    </a>
                </td>
                <td>
                    <a href="#" class="sd-contact-editable-text" data-name="email" data-type="text" data-pk="{{ item.0.id }}" data-value="{{ item.0.email }}" data-original-title="{% trans %}Edit{% endtrans %}">
                        {{ item.0.email }}
                    </a>
                </td>
                <td>
                    <a href="#"
                        class="sd-contact-editable-text sd-contact-birthday"
                        data-name="birthdayString"
                        data-type="text"
                        data-pk="{{ item.0.id }}"
                        {% if item.0.birthday %}
                            data-value="{{ item.0.birthday|date("d.m.Y") }}"
                        {% endif %}
                        data-original-title="{% trans %}Edit{% endtrans %}"
                    >
                        {% if item.0.birthday %}
                            {{ item.0.birthday|date("d.m.Y") }}
                        {% endif %}
                    </a>
                </td>
                <td>
                    <a href="#"
                        class="sd-contact-editable-text"
                        data-source="{{ path('sd_common_ajax_model_contact_type') }}"
                        data-name="typeId"
                        data-type="select"
                        data-pk="{{ item.0.id }}"
                        {% if item.0.type %}
                            data-value="{{ item.0.type.id }}"
                        {% endif %}
                        data-original-title="{% trans %}Edit{% endtrans %}"
                    >
                        {{ item.0.type }}
                    </a>
                </td>
                <td>
                    {{ item.ownerFullName }}
                    {% if item.0.ownerdatetime %}
                        ({{ item.0.ownerdatetime|date("d.m.y") }})
                    {% endif %}
                </td>
                <td>
                    {{ item.creatorFullName }}
                    {% if item.0.createdatetime %}
                        ({{ item.0.createdatetime|date("d.m.y") }})
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% if organizationId %}
    {% else %}
        <div class="navigation">
            {{ knp_pagination_render(pagination) }}
        </div>
    {% endif %}