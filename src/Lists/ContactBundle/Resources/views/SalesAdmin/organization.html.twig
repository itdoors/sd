{% trans_default_domain 'ListsContactBundle' %}
{% if organizationId %}
{% else %}
<div class="navigation">
    {{ knp_pagination_render(pagination) }}
</div>
{% endif %}

<script type="text/javascript">

    $(document).ready(function(){

        $.fn.editable.defaults.inputclass = 'form-control';
        $.fn.editable.defaults.emptytext = '{% trans %}Enter value{% endtrans %}';

        $('.ownerId').editable({
            url: '{{ path('sd_common_ajax_model_contact_save') }}',
            source: '{{ path('sd_common_ajax_user') }}',
            select2: {
                placeholder: '{% trans %}Select Owner{% endtrans %}',
                minimumInputLength: 2
            }
        });
    })

</script>

<div class="table-scrollable">
    <table class="table table-striped table-hover table-bordered">
        <thead>
        <tr>
            <th>#</th>
            {% if organizationId %}
            {% else %}
                <th>{% trans %}Organization{% endtrans %}</th>
            {% endif %}
            <th>{% trans %}FirstName{% endtrans %}</th>
            <th>{% trans %}LastName{% endtrans %}</th>
            <th>{% trans %}SurName{% endtrans %}</th>
            <th>{% trans %}Position{% endtrans %}</th>
            <th>{% trans %}Phone{% endtrans %}</th>
            <th>{% trans %}Mobile{% endtrans %}</th>
            <th>{% trans %}Email{% endtrans %}</th>
            <th>{% trans %}Birthday{% endtrans %}</th>
            <th>{% trans %}Owner{% endtrans %}</th>
            <th>{% trans %}Creator{% endtrans %}</th>
            <th>{% trans %}Action{% endtrans %}</th> {# Поле для действий, возможно для менеджера запретить удалять #}
        </tr>
        </thead>
        <tbody>
        {% for item in pagination %}
            <tr >
                <td>{{ item.0.id }}</td>
                {% if organizationId %}
                {% else %}
                    <td>{{ item.organizationName }}</td>
                {% endif %}
                <td>{{ item.0.firstName }}</td>
                <td>{{ item.0.lastName }}</td>
                <td>{{ item.0.middleName }}</td>
                <td>{{ item.0.position }}</td>
                <td>{{ item.0.phone1 }}</td>
                <td>{{ item.0.phone2 }}</td>
                <td>{{ item.0.email }}</td>
                <td>
                    {% if item.0.birthday %}
                        {{ item.0.birthday|date("d.m.y") }}
                    {% endif %}
                </td>
                <td>
                    <a href="#" class="ownerId" data-type="select2" data-name="ownerId" data-pk="{{ item.0.id }}" data-value="{{ item.ownerId }}" data-original-title="{% trans %}Select Owner{% endtrans %}">
                        {{ item.ownerFullName }}
                        {% if item.0.ownerdatetime %}
                            ({{ item.0.ownerdatetime|date("d.m.y") }})
                        {% endif %}
                    </a>
                </td>
                <td>
                    {{ item.creatorFullName }}
                    {% if item.0.createdatetime %}
                        ({{ item.0.createdatetime|date("d.m.y") }})
                    {% endif %}
                </td>
                <td>
                    <a
                            class="ajax-delete"
                            href="javascript:;"
                            data-params='{"model":"ModelContact","id":{{ item.0.id }}}'
                            >
                        {% trans %}Delete{% endtrans %}
                    </a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% if organizationId %}
{% else %}
    <div class="navigation">
        {{ knp_pagination_render(pagination) }}
    </div>
{% endif %}